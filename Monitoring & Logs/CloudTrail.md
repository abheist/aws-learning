- AWS CloudTrail
	- Internal monitoring of API calls being made
	- Audit change to AWS Resources by your users
- Provide governance, compliance and audit for your AWS Account
- CloudTrail is enabled by default!
- Get an history of events / API calls made within your AWS Account by:
	- Console
	- SDK
	- CLI
	- AWS Services
- Can put logs from CloudTrail into CloudWatch Logs or S3
- A trail can be applied to All Regions (default) or a single Region
- If a resource is deleted in AWS, investigate CloudTrail first!![Screenshot 2023-07-15 at 7.00.47 AM](../images%201/Screenshot%202023-07-15%20at%207.00.47%20AM.png)
- ### CloudTrail Events
- Management Events
	- Operations that are performed on resources in your AWS account
	- Examples:
		- Configuring security (IAM `AttachRolePolicy`)
		- Configuring rules for routing data (Amazon EC2 `CreateSubnet`)
		- Setting up logging (AWS CloudTrail `CreateTrail`)
	- By default, trails are configured to log management events
	- Can separate `Read Events` (that don't modify resources) from Write Events (that may modify resources)
- Data Events:
	- By default, data events are not logged (because high volume operations)
	- Amazon S3 object-level activity (ex: `GetObject`, `DeleteObject`, `PutObject`): can separate Read and Write Events
	- AWS Lambda function execution activity (the `Invoke` API)
- CloudTrail Insights:
	- Enable CloudTrail insights to detect unusual activity in your account:
		- inaccurate resource provisioning
		- hitting service limits
		- Burst of AWS IAM actions
		- Gaps in periodic maintenance activity
	- CloudTrail insights analyzes normal management events to create a baseline
	- And then continuously analyzes write events to detect unusual patterns
		- Anomalies appear in the CloudTrail console
		- Event is sent to Amazon S3
		- An EventBridge event is generated (for automation needs)
			  ![Screenshot 2023-07-15 at 7.21.59 AM](../images%201/Screenshot%202023-07-15%20at%207.21.59%20AM.png)
- CloudTrail Events Retentions
	- Events are stored for 90 days in CloudTrail
	- To keep events beyond this period, log them to [S3](../S3.md) and use [Athena](Athena)
		![Screenshot 2023-07-15 at 7.23.46 AM](../images%201/Screenshot%202023-07-15%20at%207.23.46%20AM.png)
- CloudTrail and [EventBridge](EventBridge.md) integration
	- Intercept API calls
		  ![Screenshot 2023-07-15 at 7.26.21 AM](../images%201/Screenshot%202023-07-15%20at%207.26.21%20AM.png)
